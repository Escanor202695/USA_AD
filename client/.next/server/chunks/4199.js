"use strict";exports.id=4199,exports.ids=[4199],exports.modules={4199:(e,a,l)=>{l.d(a,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var t=l(30784),s=l(9885),r=l(17906),n=l(77829),i=l(79422),o=l(50714),d=l(85589),u=l(55738),c=l(74663),m=l(66521),h=l(34751),_=l(57114),g=l(53275);let __WEBPACK_DEFAULT_EXPORT__=({preview:e,formValues:a})=>{let[l]=n.Z.useForm(),[p,f]=(0,s.useState)(!0),[x,y]=(0,s.useState)([]),[v,E]=(0,s.useState)([]),[b,P]=(0,s.useState)([]),j=(0,_.useRouter)(),fetchData=async()=>{let e=await r.Z.get("/dynamicform/country-state-city"),a=e.data?.countries;y(a)};(0,s.useEffect)(()=>{fetchData()},[]);let handleCountryChange=e=>{let a=x.find(a=>a.name===e);a?(E(a.states||[]),l.setFieldsValue({State:void 0,City:void 0})):E([])},handleStateChange=e=>{let a=v.find(a=>a.name===e);a?(P(a.cities||[]),l.setFieldsValue({City:void 0})):P([])},handleFormSubmit=async e=>{if(!localStorage.getItem("token")){g.Z.confirm({title:"You need to login first",content:"Are you a valid user?",okText:"Login",okButtonProps:{style:{background:"red",borderColor:"red"}},onOk:()=>j.push("/login")});return}let t=Object.keys(e).find(a=>Array.isArray(e[a]?.fileList)&&e[a]?.fileList[0]?.response||e[a]?.file?.response);t&&(Array.isArray(e[t]?.fileList)&&e[t]?.fileList[0]?.response?e[t]=e[t].fileList.map(e=>e.response):e[t]?.file?.response&&(e[t]=[e[t].file.response])),console.log(e);let s={};a.forEach(a=>{s[a.section]={},a.fields.forEach(l=>{s[a.section][l.name]=e[l.name]})}),console.log(s);let n=await r.Z.post("/dynamicform/formdata",{data:s,email:localStorage.getItem("useremail")});console.log(n.data),h.Am.success("Form submitted successfully"),l.resetFields()};return(0,t.jsxs)("div",{className:"border bg-[#101827] rounded-lg border-[#F04D99] w-[100%] md:w-[75%] lg:w-[60%] mx-auto",children:[(0,t.jsxs)(n.Z,{form:l,onFinishFailed:()=>{f(!1)},onFinish:handleFormSubmit,layout:"vertical",style:{color:"white",padding:"20px",margin:"auto",borderRadius:"10px"},children:[a?.map((e,a)=>t.jsxs("div",{children:[t.jsx("div",{children:e?.section}),e?.fields?.map((e,a)=>e?.type==="text"?t.jsx(i.Z,{name:e?.name,rules:[{required:e?.isRequired,message:e?.errorMessage??"Please enter a value"}]},a):e?.type==="phone"?t.jsx(o.Z,{name:e?.name,rules:[{required:e?.isRequired,message:e?.errorMessage??"Please enter a value"}]},a):e?.type==="select"?t.jsx(d.Z,{name:e?.name,data:e?.name==="Country"?x:e?.name==="State"?v:e?.name==="City"?b:e?.data,onChange:e?.name==="Country"?handleCountryChange:e?.name==="State"?handleStateChange:null,rules:[{required:e?.isRequired,message:e?.errorMessage??"Please select a value"}]},a):e?.type==="date"?t.jsx(u.Z,{name:e?.name,rules:[{required:e?.isRequired,message:e?.errorMessage??"Please select a value"}]},a):e?.type==="radio"?t.jsx(c.Z,{name:e?.name,data:e?.data,rules:[{required:e?.isRequired,message:e?.errorMessage??"Please select a value"}]},a):e?.type==="image"?t.jsx(m.Z,{name:e?.name,rules:[{required:e?.isRequired,message:e?.errorMessage??"Please select a value"}]},a):void 0)]},a)),t.jsx(n.Z.Item,{children:t.jsx("button",{className:"flex w-full justify-center rounded-md bg-[#F04D99]  px-3 py-2 text-md font-semibold leading-6 text-white shadow-sm hover:bg-[#bd7ee5] focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",children:"Submit"})})]}),e&&!p?t.jsx("div",{children:"All * fieldes have to be correct to submit a form"}):null]})}},55738:(e,a,l)=>{l.d(a,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var t=l(30784),s=l(9885),r=l.n(s),n=l(77829),i=l(21314);l(64731);let __WEBPACK_DEFAULT_EXPORT__=({name:e,rules:a})=>{let[l,s]=r().useState(null);return t.jsx(n.Z.Item,{label:t.jsx("span",{style:{color:"white"},children:e}),name:e,rules:a,value:l,children:t.jsx(i.Z,{format:"DD/MM/YYYY",allowClear:!0,size:"large",onChange:(e,a)=>{console.log(e,a),s(a)},className:"rounded-lg",style:{width:"100%"}})})}},66521:(e,a,l)=>{l.d(a,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var t=l(30784),s=l(9885),r=l(77829),n=l(72804),i=l(79636),o=l.n(i),d=l(2954);let __WEBPACK_DEFAULT_EXPORT__=({name:e,rules:a})=>{let[l,i]=(0,s.useState)([]),[u,c]=(0,s.useState)(null),onChange=async({fileList:e})=>{i(e);let a=e.filter(e=>e.response).map(e=>e.response.url);c(a),console.log("Image upload response:",u)};return t.jsx(r.Z.Item,{label:t.jsx("span",{style:{color:"white"},children:e}),name:e,rules:a,value:u,children:t.jsx(n.Z,{action:"http://localhost:4000/api/dynamicform/upload",fileList:l,onChange:onChange,className:"flex-1 bg-white flex rounded-lg p-2",multiple:!0,children:t.jsx(o(),{icon:t.jsx(d.Z,{}),className:"bg-white",children:"Click to Upload"})})})}},50714:(e,a,l)=>{l.d(a,{Z:()=>PhoneInput});var t=l(30784),s=l(43877);let r=s.PhoneNumberUtil.getInstance(),validatePhoneNumber=e=>{try{let a=r.parse(e),l=r.isValidNumber(a);return l}catch(e){return!1}};var n=l(9885),i=l(95008),o=l.n(i);l(22745);var d=l(77829);let PhoneInput=function({onChange:e,name:a,rules:l}){let[s,r]=(0,n.useState)("");return t.jsx(d.Z.Item,{label:t.jsx("span",{style:{color:"white"},children:a}),name:a,rules:l,children:t.jsx(o(),{inputStyle:{width:"100%",height:"45px"},placeholder:"Enter phone number",enableSearch:!0,country:"us",autoFormat:!0,countryCodeEditable:!1,disableSearchIcon:!0,value:s,onChange:(a,l)=>{r(`+${a.toString()}`),e&&e(`+${a.toString()}`)},isValid:e=>!(e.length>3)||validatePhoneNumber(`+${e}`)})})}},74663:(e,a,l)=>{l.d(a,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var t=l(30784),s=l(9885),r=l(77829),n=l(13214),i=l(97088);let{Option:o}=n.default,__WEBPACK_DEFAULT_EXPORT__=({name:e,data:a,rules:l})=>{let[n,o]=(0,s.useState)(null);return t.jsx(r.Z.Item,{label:t.jsx("span",{style:{color:"white"},children:e}),name:e,rules:l,children:t.jsx(i.ZP.Group,{onChange:e=>o(e.target.value),value:n,className:"bg-white  p-2 w-full rounded-lg flex-1 flex",children:a?.map(e=>t.jsx(i.ZP,{value:e._id,children:e.name},e._id))})})}},85589:(e,a,l)=>{l.d(a,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var t=l(30784);l(9885);var s=l(77829),r=l(13214);let{Option:n}=r.default,__WEBPACK_DEFAULT_EXPORT__=({name:e,data:a,onChange:l,rules:i})=>t.jsx(s.Z.Item,{label:t.jsx("span",{style:{color:"white"},children:e}),name:e,rules:i,children:t.jsx(r.default,{size:"large",onChange:l,children:a?.map(e=>t.jsx(n,{value:e.name,children:e.name},e._id))})})},79422:(e,a,l)=>{l.d(a,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var t=l(30784);l(9885);var s=l(77829),r=l(72781);let __WEBPACK_DEFAULT_EXPORT__=({name:e,rules:a})=>t.jsx(s.Z.Item,{label:t.jsx("span",{style:{color:"white"},children:e}),name:e,rules:a,children:t.jsx(r.Z,{className:"rounded-lg"})})}};