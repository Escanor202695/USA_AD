"use strict";exports.id=1381,exports.ids=[1381],exports.modules={31381:(e,t,s)=>{s.r(t),s.d(t,{default:()=>ManageListing});var r=s(30784),a=s(9885),d=s(17906),l=s(34751),n=s(57114),o=s(25732),i=s(53275);function ManageListing(){let[e,t]=(0,a.useState)([]),[s,c]=(0,a.useState)(!0),[x,h]=(0,a.useState)(null),m=(0,n.useRouter)();(0,a.useEffect)(()=>{getAdListings(),localStorage.getItem("token")||m.push("/login")},[]);let getAdListings=async()=>{try{let e=await d.Z.get("/dynamicform/formdata");t(e.data),c(!1)}catch(e){console.error("Error fetching adListings:",e),l.Am.error("Something went wrong!"),c(!1)}},showDeleteModal=e=>{h(e),i.Z.confirm({title:"Confirm Deletion",content:"Are you sure you want to delete this adListing?",okText:"Delete",okButtonProps:{style:{background:"red",borderColor:"red"}},onOk:()=>deleteAdListing(e)})},deleteAdListing=async e=>{try{await d.Z.delete(`/auth/${e}`),l.Am.success("Ad Listing deleted successfully!"),getAdListings()}catch(e){console.error("Error deleting adListing:",e),l.Am.error("Something went wrong!")}};return(0,r.jsxs)(r.Fragment,{children:[r.jsx(o.Z,{}),r.jsx("div",{className:"flex pt-[100px] ",children:(0,r.jsxs)("div",{className:"flex flex-col items-center w-full ",children:[r.jsx("h1",{className:"text-3xl font-bold mb-4 text-white",children:"All Ad Listings"}),s?r.jsx("p",{className:"text-gray-500",children:"Loading..."}):(0,r.jsxs)("table",{className:"max-w-full lg:w-[800px] text-left mx-auto mt-[20px] bg-white border border-gray-300 rounded-md",children:[r.jsx("thead",{children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"py-2 px-4 border-b",children:"Name"}),r.jsx("th",{className:"py-2 px-4 border-b",children:"Email"}),r.jsx("th",{className:"py-2 px-4 border-b",children:"Country"}),r.jsx("th",{className:"py-2 px-4 border-b",children:"States"}),r.jsx("th",{className:"py-2 px-4 border-b",children:"City"}),r.jsx("th",{className:"py-2 px-4 border-b",children:"Action"})]})}),r.jsx("tbody",{children:e.map(e=>(0,r.jsxs)("tr",{children:[r.jsx("td",{className:"py-2 px-4 border-b",children:e?.data["Contact Info"]?.Name}),r.jsx("td",{className:"py-2 px-4 border-b",children:e?.data["Contact Info"]?.Email}),r.jsx("td",{className:"py-2 px-4 border-b",children:e?.data["Contact Info"]?.Country}),r.jsx("td",{className:"py-2 px-4 border-b",children:e?.data["Contact Info"]?.State}),r.jsx("td",{className:"py-2 px-4 border-b",children:e?.data["Contact Info"]?.City}),r.jsx("td",{className:"py-2 px-4 border-b",children:r.jsx("button",{className:"text-red-500 hover:text-red-700",onClick:()=>showDeleteModal(e._id),children:"Delete"})})]},e._id))})]})]})})]})}}};