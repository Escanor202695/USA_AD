"use strict";exports.id=8364,exports.ids=[8364],exports.modules={38364:(e,t,s)=>{s.r(t),s.d(t,{default:()=>ManageFormPage});var l=s(30784),a=s(9885),i=s(77829),n=s(53275),d=s(17906),r=s(85589),o=s(79422),c=s(55738),m=s(66521),u=s(74663),x=s(50714),h=s(4199);let PreviewForm=({open:e,onCancel:t,formValues:s})=>{let saveForm=async()=>{let e=await d.Z.post("dynamicform/form",{name:"v1",data:s});console.log(e.data),t()};return l.jsx(n.Z,{title:"Preview Form",open:e,onCancel:t,footer:null,children:(0,l.jsxs)("div",{className:"",children:[l.jsx(h.Z,{preview:!0,formValues:s}),l.jsx("button",{onClick:saveForm,className:"flex bg-[#F04D99] text-white rounded-md mt-10 py-2 px-4 mx-auto mb-10",children:"Save Form"})]})})};var p=s(72781),j=s(84533),v=s(97088),f=s(79636),g=s.n(f);function EditForm({open:e,onCancel:t,onOk:s,name:d,initialValues:r,sectionName:o,sectionIndex:c}){let[m]=i.Z.useForm(),[u,x]=(0,a.useState)(!1),[h,f]=(0,a.useState)([]),[F,b]=(0,a.useState)(""),[y,N]=(0,a.useState)(r?.type??"text");return l.jsx(l.Fragment,{children:(0,l.jsxs)(n.Z,{title:`${d} in ${o}`,open:e,onCancel:t,onOk:()=>{m.validateFields().then(async e=>{console.log(e),e.type=y,e.isEditable=!0,("select"===y||"radio"===y)&&(e.data=h),s(c,e),m.resetFields(),x(!1)}).catch(e=>{console.log("Validate Failed:",e)})},okText:"Save",okButtonProps:{style:{backgroundColor:"#F04D99"}},children:[l.jsx("span",{className:"text-lg font-semibold",children:"Field Type"}),(0,l.jsxs)(v.ZP.Group,{onChange:e=>N(e.target.value),value:y,children:[l.jsx(v.ZP,{className:"py-2",value:"text",children:"Text Field"}),l.jsx(v.ZP,{className:"py-2",value:"radio",children:"Radio Field"}),l.jsx(v.ZP,{className:"py-2",value:"date",children:"Date Picker"}),l.jsx(v.ZP,{className:"py-2",value:"select",children:"Select Field"}),l.jsx(v.ZP,{className:"py-2",value:"image",children:"Uplaod Image Field"})]}),l.jsx("div",{className:"mt-2",children:(0,l.jsxs)(i.Z,{form:m,layout:"vertical",initialValues:r,children:[l.jsx(i.Z.Item,{name:"name",label:l.jsx("span",{className:"text-md font-semibold",children:"Name of the field (label)"}),rules:[{required:!0,message:"Field name is required!"}],children:l.jsx(p.Z,{className:"rounded-md"})}),l.jsx(i.Z.Item,{name:"isRequired",label:l.jsx("span",{className:"text-lg font-semibold",children:"Is it required?"}),valuePropName:"checked",children:l.jsx(j.Z,{onChange:e=>{x(e.target.checked)},defaultChecked:!1,children:"Required"})}),l.jsx(i.Z.Item,{name:"errorMessage",label:l.jsx("span",{className:"text-lg font-semibold",children:"Error Message"}),rules:[{required:u,message:"Error message is required if Required is checked!"}],children:l.jsx(p.Z,{className:"rounded-md",disabled:!u})}),"select"===y||"radio"===y?l.jsx("div",{children:(0,l.jsxs)("div",{children:[l.jsx(p.Z,{className:"rounded-md",placeholder:"Enter new option",value:F,onChange:e=>b(e.target.value)}),l.jsx("div",{children:l.jsx(g(),{className:"flex bg-[#F04D99] text-white rounded-md mt-2 px-4 mx-auto",onClick:()=>{F?.trim()!==""&&(f([...h,{_id:F?.trim(),name:F?.trim()}]),b(null))},children:"Add Option"})}),l.jsx("ul",{className:"disk",children:h?.map((e,t)=>l.jsx("li",{children:e?._id},t))})]})}):null]})})]})})}function EditSection({open:e,onCancel:t,onOk:s,name:a,initialValues:d}){let[r]=i.Z.useForm();return l.jsx(l.Fragment,{children:l.jsx(n.Z,{title:`${a}`,open:e,onCancel:t,onOk:()=>{r.validateFields().then(async e=>{console.log(e),s(e),r.resetFields()}).catch(e=>{console.log("Validate Failed:",e)})},okText:"Save",okButtonProps:{style:{backgroundColor:"#F04D99"}},children:l.jsx("div",{className:"mt-2",children:l.jsx(i.Z,{form:r,layout:"vertical",initialValues:d,children:l.jsx(i.Z.Item,{name:"name",label:l.jsx("span",{children:"Name of the section"}),rules:[{required:!0,message:"Field name is required!"}],children:l.jsx(p.Z,{className:"rounded-md"})})})})})})}var F=s(79620);let svg_delete=function(){return l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2.5",stroke:"white",className:"w-4 h-4",children:l.jsx("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})})},adminForm_AdminForm=({onFormSubmit:e})=>{let[t,s]=(0,a.useState)([]),[h,p]=(0,a.useState)([]),[j,v]=(0,a.useState)([]),[f,g]=(0,a.useState)(!1),[b,y]=(0,a.useState)(!1),[N,C]=(0,a.useState)(!1),[D,w]=(0,a.useState)(null),fetchData=async()=>{let e=await d.Z.get("/dynamicform/country-state-city"),t=e.data?.countries;s(t)},fetchFormFields=async()=>{let e=await d.Z.get("/dynamicform/form/v1"),t=e.data?.data;t&&P(t)};(0,a.useEffect)(()=>{fetchData(),fetchFormFields()},[]);let[k]=i.Z.useForm(),[E,P]=(0,a.useState)([{section:"Contact Info",fields:[{name:"Phone",type:"phone",isRequired:!0,errorMessage:"Please enter a valid phone number",isEditable:!1},{name:"Email",type:"text",isRequired:!0,errorMessage:"Please enter a valid email address",isEditable:!1},{name:"Country",type:"select",isRequired:!0,errorMessage:"Please select a country",isEditable:!1},{name:"State",type:"select",isRequired:!0,errorMessage:"Please select a State",isEditable:!1},{name:"City",type:"select",isRequired:!0,errorMessage:"Please select a City",isEditable:!1},{name:"Location",type:"text",isRequired:!0,errorMessage:"Please enter your loaction",isEditable:!1}]},{section:"Ad info",fields:[{name:"Title",type:"text",isRequired:!0,errorMessage:"Please add the title",isEditable:!1},{name:"Details",type:"text",isRequired:!0,errorMessage:"Please add the title",isEditable:!1},{name:"Disclaimer",type:"text",isRequired:!0,errorMessage:"Please add the title",isEditable:!1},{name:"Listing Category",type:"select",isRequired:!0,errorMessage:"Please add the title",isEditable:!1,data:[{_id:"1",name:"Premium"},{_id:"2",name:"Standard"}]},{name:"Upload images",type:"image",isRequired:!0,errorMessage:"Please add the title",isEditable:!1}]}]),handleEditFieldClick=e=>{e.preventDefault(),g(!0)},handleEditFieldModalCancel=()=>{g(!1),w(null)},handleEditFieldModalOk=(e,t)=>{console.log(e,t);let s=[...E];s[e].fields.push(t),P(s),w(null),g(!1)},confirmDeleteField=(e,t)=>{n.Z.confirm({title:"Confirm Deletion",content:"Are you sure you want to delete this field?",okText:"Delete",onOk:()=>deleteField(e,t),okButtonProps:{style:{background:"red",borderColor:"red"}}})},deleteField=(e,t)=>{let s=[...E];s[e].fields.splice(t,1),P(s)},confirmDeleteSection=e=>{n.Z.confirm({title:"Confirm Deletion",content:"Are you sure you want to delete this section?",okText:"Delete",onOk:()=>deleteSection(e),okButtonProps:{style:{background:"red",borderColor:"red"}}})},deleteSection=e=>{let t=[...E];t.splice(e,1),P(t)},handleCountryChange=e=>{let s=t.find(t=>t._id===e);s?(p(s.states||[]),k.setFieldsValue({State:void 0,City:void 0})):p([])},handleStateChange=e=>{let t=h.find(t=>t._id===e);t?(v(t.cities||[]),k.setFieldsValue({City:void 0})):v([])},onFormFieldEdit=e=>{w(e),g(!0)};return(0,l.jsxs)("div",{className:"pt-[100px] pb-[50px] w-[80%] md:w-[75%] mx-auto",children:[(0,l.jsxs)("div",{children:[l.jsx(EditSection,{open:b,onCancel:()=>{y(!1)},onOk:e=>{console.log(e),P([...E,{section:e.name,fields:[]}]),y(!1)},name:"Modify Section",initialValues:D}),(0,l.jsxs)("button",{onClick:e=>{e.preventDefault(),y(!0)},className:"flex bg-[#F04D99] items-center text-white rounded-md py-2 px-4 mx-auto",children:["Add new Section",l.jsx(F.Z,{})]})]}),l.jsx("div",{children:(0,l.jsxs)(i.Z,{form:k,onFinish:()=>{k.validateFields().then(t=>{e(t)})},layout:"vertical",children:[E?.map((e,s)=>l.jsxs("div",{className:"border-2 p-3 my-2",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{className:"text-white text-lg font-semibold",children:["Section: ",e?.section]}),l.jsxs("div",{className:"flex",children:[l.jsxs("button",{onClick:handleEditFieldClick,className:"flex bg-[#F04D99] items-center text-white rounded-md py-2 px-4 my-2",children:["Add new field",l.jsx(F.Z,{})]}),0!=s&&l.jsxs("button",{disabled:0==s,onClick:e=>{e.preventDefault(),confirmDeleteSection(s)},className:"flex bg-[#F04D99] items-center text-white rounded-md py-2 px-4 m-2",children:["Delete the section",l.jsx(svg_delete,{})]})]})]}),l.jsx(EditForm,{open:f,onCancel:handleEditFieldModalCancel,onOk:handleEditFieldModalOk,name:"Modify Field",initialValues:D,sectionName:e?.section,sectionIndex:s}),e?.fields?.map((e,a)=>e?.type==="text"?l.jsxs("div",{className:"flex justify-between items-center ",children:[l.jsx("div",{className:" flex-1 ",children:l.jsx(o.Z,{name:e?.name,rules:[{required:e?.isRequired,message:e?.errorMessage??"Please enter a value"}]})}),e?.isEditable?l.jsx("div",{className:"",children:l.jsxs("div",{className:" pt-2 ml-2",children:[l.jsx("button",{className:"p-2 mr-2 bg-[#F04D99] text-white rounded-md",onClick:t=>{t.preventDefault(),onFormFieldEdit(e)},children:"Edit"}),l.jsx("button",{className:"p-2 bg-[#F04D99] text-white rounded-md",onClick:e=>{e.preventDefault(),confirmDeleteField(s,a)},children:"Delete"})]})}):null]},a):e?.type==="phone"?l.jsx("div",{className:" flex-1",children:l.jsx(x.Z,{name:e?.name,rules:[{required:e?.isRequired,message:e?.errorMessage??"Please enter a value"}]},a)}):e?.type==="select"?l.jsxs("div",{className:" flex justify-between items-center  ",children:[l.jsx("div",{className:"flex-1",children:l.jsx(r.Z,{name:e?.name,data:e?.name==="Country"?t:e?.name==="State"?h:e?.name==="City"?j:e?.data,onChange:e?.name==="Country"?handleCountryChange:e?.name==="State"?handleStateChange:null,rules:[{required:e?.isRequired,message:e?.errorMessage??"Please select a value"}]},a)}),e?.isEditable?l.jsx("div",{className:"",children:l.jsx("div",{className:" pt-2 ml-2",children:l.jsx("button",{className:"p-2 bg-[#F04D99] text-white rounded-md",onClick:e=>{e.preventDefault(),confirmDeleteField(s,a)},children:"Delete"})})}):null]},a):e?.type==="date"?l.jsxs("div",{className:"flex justify-between items-center  ",children:[l.jsx("div",{className:" flex-1",children:l.jsx(c.Z,{name:e?.name,rules:[{required:e?.isRequired,message:e?.errorMessage??"Please select a value"}]})}),e?.isEditable?l.jsx("div",{className:"",children:l.jsxs("div",{className:" pt-2 ml-2",children:[l.jsx("button",{className:"p-2 mr-2 bg-[#F04D99] text-white rounded-md",onClick:t=>{t.preventDefault(),onFormFieldEdit(e)},children:"Edit"}),l.jsx("button",{className:"p-2 bg-[#F04D99] text-white rounded-md",onClick:e=>{e.preventDefault(),confirmDeleteField(s,a)},children:"Delete"})]})}):null]},a):e?.type==="radio"?l.jsxs("div",{className:"flex justify-between items-center ",children:[l.jsx("div",{className:"flex-1",children:l.jsx(u.Z,{name:e?.name,data:e?.data,rules:[{required:e?.isRequired,message:e?.errorMessage??"Please select a value"}]})}),e?.isEditable?l.jsx("div",{className:"",children:l.jsxs("div",{className:" pt-2 ml-2",children:[l.jsx("button",{className:"p-2 mr-2 bg-[#F04D99] text-white rounded-md",onClick:t=>{t.preventDefault(),onFormFieldEdit(e)},children:"Edit"}),l.jsx("button",{className:"p-2 bg-[#F04D99]  text-white rounded-md",onClick:e=>{e.preventDefault(),confirmDeleteField(s,a)},children:"Delete"})]})}):null]},a):e?.type==="image"?l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("div",{className:"flex-1",children:l.jsx(m.Z,{name:e?.name,rules:[{required:e?.isRequired,message:e?.errorMessage??"Please select a value"}]})}),e?.isEditable?l.jsx("div",{className:"",children:l.jsxs("div",{className:" pt-2 ml-2",children:[l.jsx("button",{className:"p-2 mr-2 bg-[#F04D99] text-white rounded-md",onClick:t=>{t.preventDefault(),onFormFieldEdit(e)},children:"Edit"}),l.jsx("button",{className:"p-2 bg-[#F04D99]  text-white rounded-md",onClick:e=>{e.preventDefault(),confirmDeleteField(s,a)},children:"Delete"})]})}):null]},a):void 0)]},s)),l.jsx(i.Z.Item,{children:l.jsx("div",{className:"",children:l.jsx("button",{className:"flex bg-[#F04D99] text-white rounded-md py-2 px-4 mx-auto",onClick:e=>{e.preventDefault(),C(!0)},children:"Preview"})})})]})}),l.jsx(PreviewForm,{open:N,onCancel:()=>C(!1),formValues:E})]})};var b=s(57114);function ManageFormPage(){let e=(0,b.useRouter)();return(0,a.useEffect)(()=>{localStorage.getItem("token")||e.push("/login")}),l.jsx(l.Fragment,{children:l.jsx("div",{className:"pt-[40px] pb-[50px] w-[80%] md:w-[75%] mx-auto ",children:l.jsx(adminForm_AdminForm,{onFormSubmit:e=>{console.log("Form submitted with values:",e)}})})})}},79620:(e,t,s)=>{s.d(t,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var l=s(30784);s(9885);let __WEBPACK_DEFAULT_EXPORT__=function(){return l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"3.5",stroke:"currentColor",className:"w-4 h-4 ml-1",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})})}}};