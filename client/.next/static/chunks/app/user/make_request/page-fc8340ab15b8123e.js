(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[401],{61169:function(e,t,s){Promise.resolve().then(s.bind(s,50712))},57351:function(e,t,s){"use strict";var n=s(57437),i=s(2265),r=s(71615),a=s(51809),l=s(81253),o=s(98356),c=s(74992),m=s(78917),d=s(19874);t.Z=e=>{let{role:t}=e,[s,u]=(0,i.useState)(!1),g=[{name:"Users",href:"/admin/users",icon:r.Z},{name:"Requests",href:"/admin/requests",icon:a.Z},{name:"Schedules",href:"/admin/schedules",icon:l.Z},{name:"Log out",href:"/admin/login",icon:o.Z,logout:!0}],h=[{name:"Home",href:"/user/home",icon:c.Z,count:"5"},{name:"Account",href:"/user/account",icon:a.Z,current:!1},{name:"Schedules",href:"/user/schedules",icon:l.Z},{name:"Make Request",href:"/user/make_request",icon:m.Z},{name:"Log out",href:"/user/login",icon:o.Z,logout:!0}],logout=()=>{localStorage.removeItem("token")};return(0,n.jsxs)("header",{className:" lg:hidden bg-gray-900 text-white p-4 flex justify-between items-center",children:[(0,n.jsx)("div",{className:"flex items-center",children:(0,n.jsx)("img",{src:"/logo.png",alt:"Logo",className:"w-[100px] h-10 mr-2 object-contain"})}),(0,n.jsx)("div",{className:"flex items-center",children:(0,n.jsx)("button",{onClick:()=>u(!s),className:"text-white focus:outline-none",children:(0,n.jsx)(d.Z,{className:"w-6 h-6"})})}),s&&(0,n.jsxs)("div",{className:"fixed top-0 left-0 w-full h-full bg-gray-800 bg-opacity-90 flex items-center justify-center",children:[(0,n.jsxs)("nav",{className:"flex flex-col text-white text-left",children:["admin"!==t&&h.map(e=>(0,n.jsxs)("a",{href:e.href,className:"py-2 px-4 hover:bg-gray-700",onClick:e.logout?logout:null,children:[e.icon&&(0,n.jsx)(e.icon,{className:"w-5 h-5 inline-block mr-2"}),e.name]},e.name)),"admin"==t&&g.map(e=>(0,n.jsxs)("a",{href:e.href,className:"py-2 px-4 hover:bg-gray-700",children:[e.icon&&(0,n.jsx)(e.icon,{className:"w-5 h-5 inline-block mr-2"}),e.name]},e.name))]}),(0,n.jsx)("button",{onClick:()=>u(!1),className:"absolute top-4 right-4 text-white focus:outline-none",children:"Close"})]})]})}},56125:function(e,t,s){"use strict";s.d(t,{Z:function(){return Sidebar}});var n=s(57437),i=s(74992),r=s(51809),a=s(81253),l=s(78917),o=s(98356),c=s(24033);let m=[{name:"Home",href:"/user/home",icon:i.Z,count:"5"},{name:"Account",href:"/user/account",icon:r.Z},{name:"Schedules",href:"/home",icon:a.Z,current:!1},{name:"Make Request",href:"/home",icon:l.Z,current:!1},{name:"Log out",href:"#",icon:o.Z,current:!1}];function Sidebar(){let e=(0,c.useRouter)(),logout=()=>{console.log("token"),localStorage.removeItem("token"),e.push("/")};return(0,n.jsxs)("div",{className:"hidden lg:flex grow flex-col gap-y-5 overflow-y-auto bg-gray-900 px-6 h-[100vh] w-[300px] max-w-[300px]",children:[(0,n.jsx)("div",{className:"flex h-16 shrink-0 items-center",children:(0,n.jsx)("img",{className:"h-8 w-auto",src:"/logo.png",alt:"Your Company"})}),(0,n.jsx)("nav",{className:"flex flex-1 flex-col",children:(0,n.jsx)("ul",{role:"list",className:"flex flex-1 flex-col gap-y-7",children:(0,n.jsx)("li",{children:(0,n.jsx)("ul",{role:"list",className:"-mx-2 space-y-1",children:m.map(e=>(0,n.jsx)("li",{onClick:"#"==e.href?logout:null,children:(0,n.jsxs)("a",{href:e.href,className:function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter(Boolean).join(" ")}(e.current?"bg-gray-800 text-white":" text-white hover:bg-gray-800","group flex gap-x-3 rounded-md p-2 text-sm leading-6 font-semibold"),children:[(0,n.jsx)(e.icon,{className:"h-6 w-6 shrink-0","aria-hidden":"true"}),e.name]})},e.name))})})})})]})}},50712:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return page}});var n=s(57437),i=s(56125),r=s(2265),a=s(92173),l=s(60171),o=s(24033);function Request(e){let{requestType:t}=e,[s,i]=(0,r.useState)(""),[c,m]=(0,r.useState)(""),[d,u]=(0,r.useState)(""),[g,h]=(0,r.useState)(""),[x,f]=(0,r.useState)(""),[p,y]=(0,r.useState)(""),[j,v]=(0,r.useState)(""),[N,b]=(0,r.useState)(""),[w,k]=(0,r.useState)(""),S=(0,o.useRouter)(),handleRequest=async e=>{e.preventDefault();let isNotEmptyString=e=>"string"==typeof e&&""!==e.trim();if(console.log(w),"rotation"===t&&isNotEmptyString(s)&&isNotEmptyString(c)&&isNotEmptyString(d)&&isNotEmptyString(g)&&isNotEmptyString(x)&&isNotEmptyString(p)||"leave"===t&&isNotEmptyString(x)&&isNotEmptyString(p)||"oncall-switching"===t&&isNotEmptyString(j)&&isNotEmptyString(x)&&isNotEmptyString(p)||"general"===t&&isNotEmptyString(w)||"oncall"===t&&isNotEmptyString(N))try{let e=await a.Z.post("https://o-ras.com/api/request",{type:t,center:s,city:c,grade:d,desired_rotation:g,from:x,to:p,switching_resident_name:j,not_preferred_dates:N,message:w},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});l.Am.success(e.data.message),S.push("/user/account"),console.log(e.data)}catch(e){var n,i;console.error("Signup failed:",e),l.Am.error(null==e?void 0:null===(i=e.response)||void 0===i?void 0:null===(n=i.data)||void 0===n?void 0:n.message)}else l.Am.error("Please fill in all required fields.")};return(0,n.jsx)("div",{className:"w-[600px] max-w-full",children:(0,n.jsx)("div",{className:"flex flex-1 flex-col justify-center py-4",children:(0,n.jsx)("div",{className:"mt-10 sm:mx-auto sm:w-full sm:max-w-sm",children:(0,n.jsxs)("form",{className:"space-y-6",action:"#",method:"POST",children:["rotation"==t&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium leading-6 text-gray-900",children:"Center"}),(0,n.jsx)("div",{className:"mt-2",children:(0,n.jsx)("input",{id:"center",name:"center",type:"text",autoComplete:"center",required:!0,value:s,onChange:e=>i(e.target.value),className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"city",className:"block text-sm font-medium leading-6 text-gray-900",children:"City"}),(0,n.jsx)("div",{className:"mt-2",children:(0,n.jsx)("input",{id:"city",name:"city",type:"text",autoComplete:"city",required:!0,value:c,onChange:e=>m(e.target.value),className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium leading-6 text-gray-900",children:"Grade"}),(0,n.jsx)("div",{className:"mt-2",children:(0,n.jsx)("input",{id:"grade",name:"grade",type:"text",autoComplete:"grade",onChange:e=>u(e.target.value),required:!0,className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"rotation",className:"block text-sm font-medium leading-6 text-gray-900",children:"Desired Rotation"}),(0,n.jsx)("div",{className:"mt-2",children:(0,n.jsx)("input",{id:"rotation",name:"rotation",type:"text",autoComplete:"rotation",value:g,onChange:e=>h(e.target.value),required:!0,className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]})]}),("rotation"==t||"leave"==t||"oncall-switching"==t)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"rotation",className:"block text-sm font-medium leading-6 text-gray-900",children:"From Date:"}),(0,n.jsx)("div",{className:"mt-2",children:(0,n.jsx)("input",{id:"from",name:"from",type:"date",autoComplete:"from",value:x,onChange:e=>f(e.target.value),required:!0,className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"rotation",className:"block text-sm font-medium leading-6 text-gray-900",children:"To Date"}),(0,n.jsx)("div",{className:"mt-2",children:(0,n.jsx)("input",{id:"to",name:"to",type:"date",autoComplete:"to",value:p,onChange:e=>y(e.target.value),required:!0,className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]})]}),"oncall-switching"==t&&(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"switching_with",className:"block text-sm font-medium leading-6 text-gray-900",children:"Resident's Name (switching with)"}),(0,n.jsx)("div",{className:"mt-2",children:(0,n.jsx)("input",{id:"switch_with",name:"switch_with",type:"text",autoComplete:"switch_with",value:j,onChange:e=>v(e.target.value),required:!0,className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]})}),"oncall"==t&&(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"not_preferred",className:"block text-sm font-medium leading-6 text-gray-900",children:"Not Preferred Dates (use comma for multiple)"}),(0,n.jsx)("div",{className:"mt-2",children:(0,n.jsx)("input",{id:"not_preferred",name:"not_preferred",type:"text",autoComplete:"not_preferred",value:N,onChange:e=>b(e.target.value),required:!0,className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"message",className:"block text-sm font-medium leading-6 text-gray-900",children:"Message"}),(0,n.jsx)("div",{className:"mt-2",children:(0,n.jsx)("textarea",{id:"message",name:"message",type:"text",autoComplete:"message",value:w,onChange:e=>k(e.target.value),className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]}),(0,n.jsx)("div",{children:(0,n.jsx)("button",{type:"submit",onClick:handleRequest,className:"flex w-full justify-center rounded-md bg-indigo-600 px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",children:"Submit"})})]})})})})}var c=s(57351),page=function(e){let[t,s]=(0,r.useState)(""),a=(0,o.useRouter)();return(0,r.useEffect)(()=>{let e=localStorage.getItem("token");e||a.push("/user/login")}),(0,r.useEffect)(()=>{console.log(t)},[t]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.Z,{role:"user"}),(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)(i.Z,{page:"home"}),(0,n.jsxs)("div",{className:"flex-1 flex items-center flex-col h-[100vh] overflow-scroll p-[60px]",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold mb-2",children:"Make New Request"}),(0,n.jsx)("p",{className:"text-gray-700 text-center text-sm mb-6",children:"Select a request type first and then fill up the form"}),(0,n.jsx)("div",{children:(0,n.jsxs)("select",{id:"location",name:"location",className:"mt-2 md:w-[385px] block max-w-full rounded-md border-0 py-1.5 pl-3 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-indigo-600 sm:text-sm sm:leading-6",onChange:e=>s(e.target.value),children:[(0,n.jsx)("option",{disabled:!0,selected:!0,children:"Select Request Type"}),(0,n.jsx)("option",{value:"oncall-switching",children:"On-call Switching Request"}),(0,n.jsx)("option",{value:"oncall",children:"On-call Request"}),(0,n.jsx)("option",{value:"leave",children:"Leave Request"}),(0,n.jsx)("option",{value:"rotation",children:"Rotation In KFSH Request"}),(0,n.jsx)("option",{value:"general",children:"General Request"})]})}),""!=t&&(0,n.jsx)(Request,{requestType:t})]})]})]})}}},function(e){e.O(0,[580,209,971,472,744],function(){return e(e.s=61169)}),_N_E=e.O()}]);